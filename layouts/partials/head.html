<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

{{ $desc := .Summary }}
{{ if .IsHome }}
{{ $desc = $.Site.Params.Subtitle }}
{{ else if .Description }}
{{ $desc = .Description }}
{{ end }}
<meta name="description" content="{{ $desc | plainify }}" />

{{ $keywords := $.Site.Params.Keywords }}
{{ if .Params.Keywords }}
{{ $keywords = delimit .Params.Keywords ", " }}
{{ end }}
<meta name="keywords" content="{{ $keywords }}" />

{{ if .Params.noindex }}
{{ if or (eq (.Param "noindex") true) (eq (.Param "noindex") "true") }}
<meta name="robots" content="noindex" />
{{ end }}
{{ else }}
<meta name="robots" content="noodp" />
{{ end }}
<link rel="canonical" href="{{ .Permalink }}" />

{{ template "_internal/google_analytics.html" . }}

{{ $defaultStylesTemplate := resources.Get "css/style.scss" }}
{{ $defaultStyles := $defaultStylesTemplate | resources.ExecuteAsTemplate "main.scss" .}}

{{ $isLocal := and (isset .Params "color") (not (eq .Params.color "")) }}
{{ if $isLocal }}
{{ $cPath := printf "css/color/%s.scss" .Params.color }}
{{ $localColorCss := resources.Get $cPath }}
{{ $lPath := printf "css/%s-local.scss" .Params.color }}
{{ $localCss := slice $localColorCss $defaultStyles | resources.Concat $lPath }}
{{ $opts := dict "targetPath" "styles.css" "outputStyle" "compressed" "enableSourceMap" true "includePaths" (slice
"node_modules") }}
{{ $localColorStyles := $localCss | css.Sass $opts }}
<link rel="stylesheet" href="{{ $localColorStyles.Permalink }}">
{{ else }}
{{ $defColor := $.Site.Params.ThemeColor | default "blue" }}
{{ $cPath := printf "css/color/%s.scss" $defColor }}
{{ $colorCss := resources.Get $cPath }}
{{ if not $colorCss }}
{{ $colorCss = resources.Get "css/color/catppuccin-mocha-mauve.scss" }}
{{ end }}
{{ $css := slice $defaultStyles $colorCss | resources.Concat "css/base.scss" }}
{{ $opts := dict "targetPath" "styles.css" "outputStyle" "compressed" "enableSourceMap" true "includePaths" (slice
"node_modules") }}
{{ $styles := $css | css.Sass $opts }}
<link rel="stylesheet" href="{{ $styles.Permalink }}">
{{ end }}

{{ if (fileExists "static/style.css") -}}
<link rel="stylesheet" href="{{ " style.css" | absURL }}">
{{- end }}

{{ if isset $.Site.Params "favicon" }}
<link rel="shortcut icon" href="{{ $.Site.Params.favicon | absURL }}">
{{ else }}
{{ $defC := $.Site.Params.ThemeColor | default "orange" }}
{{ $favC := or .Params.color $defC }}
{{ $favPath := printf "img/theme-colors/%s.png" $favC }}
<link rel="shortcut icon" href="{{ $favPath | absURL }}">
<link rel="apple-touch-icon" href="{{ $favPath | absURL }}">
{{ end }}

<meta name="twitter:card" content="summary" />
{{ if (isset $.Site.Params "twitter") }}
{{ if (isset $.Site.Params.Twitter "site") }}
<meta name="twitter:site" content="{{ $.Site.Params.Twitter.site }}" />
{{ end }}
{{ $twC := .Params.Author }}
{{ if .IsHome }}
{{ $twC = $.Site.Params.Twitter.creator }}
{{ else if isset .Params "authortwitter" }}
{{ $twC = .Params.authorTwitter }}
{{ end }}
<meta name="twitter:creator" content="{{ $twC }}" />
{{ end }}

<meta property="og:locale" content="{{ $.Site.Language.Lang }}" />
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:title" content="{{ if .IsHome }}{{ $.Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta property="og:description" content="{{ $desc | plainify }}" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:site_name" content="{{ $.Site.Title }}" />

{{ if (isset .Params "cover") }}
{{ $pageCover := .Param "cover" }}
{{ with (.Resources.GetMatch (.Param "cover")) }}
{{ $pageCover = .RelPermalink }}
{{ end }}
<meta property="og:image" content="{{ $pageCover | absURL }}">
{{ else }}
{{ if isset $.Site.Params "favicon" }}
<meta property="og:image" content="{{ $.Site.Params.favicon | absURL }}">
{{ else }}
{{ $defC := $.Site.Params.ThemeColor | default "blue" }}
{{ $favPath := printf "img/favicon/%s.png" $defC }}
<meta property="og:image" content="{{ $favPath | absURL }}">
{{ end }}
{{ end }}

{{ range .Params.categories }}
<meta property="article:section" content="{{ . }}" />
{{ end }}
{{ if isset .Params "date" }}
<meta property="article:published_time" content="{{ time .Date }}" />
{{ end }}

{{ with .OutputFormats.Get "RSS" }}
<link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}" />
{{ end }}
{{ with .OutputFormats.Get "json" }}
<link href="{{ .RelPermalink }}" rel="alternate" type="application/json" title="{{ $.Site.Title }}" />
{{ end }}

<!-- Analytics -->
<script defer src="https://cloud.umami.is/script.js" data-website-id="d6ef3a2a-0acb-4732-b5dc-61a374d11c89"></script>